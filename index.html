<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Music Play Button</title>
  <style>
    :root {
      --ring-radius: 35; /* ✅ change this to tighten/loosen the circle */
    }

    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #111;
    }

    .player {
      position: relative;
      width: 120px;   /* overall size of widget */
      height: 120px;
    }

    svg {
      width: 100%;
      height: 100%;
      transform: rotate(-90deg); /* start at top */
    }

    circle {
      fill: none;
      stroke-width: 4;
      stroke-linecap: round;
    }

    .progress {
      stroke: #cd1c18;
      stroke-dasharray: 0;
      stroke-dashoffset: 0;
      transition: stroke-dashoffset 0.1s linear;
    }

    .play-btn {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: none;
      border: none;
      cursor: pointer;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }

    /* === ICONS === */

    /* Triangle for play */
    .icon-play {
      width: 0;
      height: 0;
      border-left: 24px solid white;
      border-top: 14px solid transparent;
      border-bottom: 14px solid transparent;
    }

    /* Pause: two chunky bars */
    .icon-pause {
      display: flex;
      gap: 6px; /* space between bars */
    }
    .icon-pause div {
      width: 8px;  /* ✅ thicker pause bars */
      height: 28px;
      background: white;
      border-radius: 2px;
    }
  </style>
</head>
<body>
  <div class="player">
    <svg viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet">
      <circle class="progress"
              cx="50"
              cy="50"
              r="35"></circle>
    </svg>
    <button class="play-btn" id="playPauseBtn">
      <div class="icon-play"></div>
    </button>
  </div>

  <audio id="audio" src="breakthrough.mp3"></audio>

  <script>
    const playBtn = document.getElementById("playPauseBtn");
    const audio = document.getElementById("audio");
    const progressCircle = document.querySelector(".progress");

    // Match CSS radius
    const radius = parseInt(getComputedStyle(document.documentElement)
                   .getPropertyValue("--ring-radius"));
    const circumference = 2 * Math.PI * radius;
    progressCircle.setAttribute("r", radius);
    progressCircle.style.strokeDasharray = circumference;
    progressCircle.style.strokeDashoffset = circumference;

    let isPlaying = false;

    function setPlayIcon() {
      playBtn.innerHTML = '<div class="icon-play"></div>';
    }
    function setPauseIcon() {
      playBtn.innerHTML = '<div class="icon-pause"><div></div><div></div></div>';
    }

    playBtn.addEventListener("click", () => {
      if (!isPlaying) {
        audio.play();
        setPauseIcon();
        isPlaying = true;
      } else {
        audio.pause();
        setPlayIcon();
        isPlaying = false;
      }
    });

    audio.addEventListener("timeupdate", () => {
      const progress = audio.currentTime / audio.duration;
      const offset = circumference - progress * circumference;
      progressCircle.style.strokeDashoffset = offset;
    });

    audio.addEventListener("ended", () => {
      setPlayIcon();
      isPlaying = false;
      progressCircle.style.strokeDashoffset = circumference;
    });

    // init
    setPlayIcon();
  </script>
</body>
</html>
